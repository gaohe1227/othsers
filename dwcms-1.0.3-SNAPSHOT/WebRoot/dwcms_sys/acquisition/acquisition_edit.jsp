<%@ include file="/res/common/jsp/jsp_defined.jsp"%><%@ taglib uri="ChannelTagLib" prefix="channel" %><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title></title>		<link href="<%=basePath%>res/dwcms/css/admin.css" rel="stylesheet" type="text/css">		<link href="<%=basePath%>res/dwcms/css/theme.css" rel="stylesheet" type="text/css">		<link href="<%=basePath%>/thirdparty/jquery-easyui/themes/icon.css" rel="stylesheet" type="text/css">		<link rel="stylesheet" type="text/css" href="<%=basePath%>/thirdparty/jquery-easyui/themes/dark-hive/easyui.css" id="swicth-style">		<script type="text/javascript" src="<%=basePath%>/thirdparty/jquery-easyui/jquery-1.7.2.min.js"></script>		<script type="text/javascript" src="<%=basePath%>/thirdparty/jquery-easyui/jquery.easyui.min.js"></script>		<script type="text/javascript" src="${ctx}/thirdparty/My97DatePicker/WdatePicker.js"></script>		<script type="text/javascript" src="<%=basePath%>res/common/js/pony.js"></script>		<script type="text/javascript" src="<%=basePath%>res/common/js/jquery.js"></script>		<script type="text/javascript" src="<%=basePath%>res/common/js/jquery.ext.js"></script>		<script type="text/javascript" src="<%=basePath%>res/common/js/jquery.colorpicker.js"></script>				<script type="text/javascript" src="<%=basePath%>res/common/js/ajaxfileupload.js"></script>	<script type="text/javascript">$.validator.methods.leafChannel = function(value, element, param) {	var i = element.selectedIndex;	return $(element.options[i]).attr("class")!="sel-disabled";};$(function() {	$("#jvForm").validate({		rules: {			channelId: {				required: true,				leafChannel: true			}		},		messages:{			channelId: {				leafChannel: "请选择末级栏目"			}		}	});});$(function(){    $('#channelTree').tree({   	      checkbox: false,   	      url: '<%=basePath%>admin/core/channel/v_asyncEasyTree.do',   	      onBeforeExpand:function(node,param){	            $('#channelTree').tree('options').url = "<%=basePath%>admin/core/channel/v_asyncEasyTree.do?parentId=" + node.id;// change the url                       	                     //param.myattr = 'test';    // or change request parameter	      },               	      onClick:function(node){             	             $("#chname").empty();	             $("#chname").val(node.text);	             $("#channelId").val(node.id);	      }      });   }); function showMenu() {     var cityObj = $("#chname");//输入框     var cityOffset = $("#chname").offset();//获取匹配元素在当前视口的相对偏移     //cityOffset.left 元素在当前视口的相对偏移     //slideDown 通过高度变化（向下增大）来动态地显示所有匹配的元素，在显示完成后可选地触发一个回调函数。     $("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");          $("body").bind("mousedown", onBodyDown);//给body绑定鼠标按下事件  }  function hideMenu() {     $("#menuContent").fadeOut("fast");     $("body").unbind("mousedown", onBodyDown);  }//event 代表事件的状态，比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。  //event.target 直接接受事件的目标DOM元素  function onBodyDown(event) {     //如果接受事件的目标DOM元素的id 不是menuBtn（选择） 或 不是menuContent（菜单内容） 或  menuContent对象中元素的个数不大于0     //点击不是选择按钮，不是菜单内容的时候就隐藏下拉目录     if (!(event.target.id == "menuBtn" || event.target.id == "menuContent" || $(event.target).parents("#menuContent").length>0)) {         hideMenu();     }  }</script><style type="text/css">.sel-disabled{background-color:#ccc}</style></head><body><div class="body-box"><div class="rhead">	<div class="rpos">当前位置: 采集管理 - 添加</div>	<form class="ropt">		<input type="submit" value="返回列表" onclick="this.form.action='v_list.do';"/>	</form>	<div class="clear"></div></div><form method="post" action="o_save.do" id="jvForm"><input type="hidden" name="acquisitionId" value="${acquisition.acquisitionId}" /><table width="100%" class="pn-ftable" cellpadding="2" cellspacing="1" border="0"><tr><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>采集名称:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="50" name="acqName" value="${acquisition.acqName }" class="required" maxlength="50"/></td><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>入库信息:</td><td colspan="1" width="38%" class="pn-fcontent">类型: <select name="typeId"><option value="1">普通</option><option value="2">图文</option><option value="3">焦点</option><option value="4">头条</option></select>&nbsp; 栏目:<input id="chname" type="text" readonly value="<channel:showChannelSelect showType="SHOWNAME" channelId="${acquisition.channelId}"/>" style="width:120px;"/>&nbsp;&nbsp;<a id="menuBtn" href="#" onClick="showMenu(); return false;">选择</a><input id="channelId" name="channelId" type="hidden" value="${acquisition.channelId}"/>     <div id="menuContent" style="display:none; position: absolute;width:160px;background: #fff;">         <ul id="channelTree" style="margin-top:0; width:160px;">         </ul>     </div>	<span class="pn-fhelp">请选择末级栏目</span></td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>页面编码:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="20" value="${acquisition.pageEncoding}"  name="pageEncoding" class="required" maxlength="20"/> <span class="pn-fhelp">GBK或UTF-8等编码</span></td><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>暂停时间:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="10" value="500" name="pauseTime" value="${acquisition.pauseTime}"  class="required" style="width:50px" maxlength="10"/> <span class="pn-fhelp">每采集一篇文章暂停时间。单位(毫秒)</span></td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h">采集地址:</td><td colspan="3" width="88%" class="pn-fcontent"><textarea cols="70" rows="5" name="planList">${acquisition.planList}</textarea><div class="pn-fhelp">一个地址一行</div></td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h">动态地址:</td><td colspan="3" width="88%" class="pn-fcontent"><div><input type="text" name="dynamicAddr" value="${acquisition.dynamicAddr}"  style="width:450px" maxlength="255"/> <span class="pn-fhelp">分页变量用[page]代替</span></div><div>页码 从 <input type="text" name="dynamicStart" value="${acquisition.dynamicStart}"  size="7"/> &nbsp; 到: <input type="text" name="dynamicEnd" value="${acquisition.dynamicEnd}" size="7"/></div> </td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h">内容地址集:</td><td colspan="3" width="88%" class="pn-fcontent"><table border="0" width="100%"><tr><td align="center" width="50%">开始HTML</td><td align="center" width="50%">结束HTML</td></tr><tr><td align="center" width="50%"><textarea name="linksetStart" rows="4" style="width:85%">${acquisition.linksetStart}</textarea></td><td align="center" width="50%"><textarea name="linksetEnd" rows="4" style="width:85%">${acquisition.linksetEnd}</textarea></td></tr></table></td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h">内容地址:</td><td colspan="3" width="88%" class="pn-fcontent"><table border="0" width="100%"><tr><td align="center" width="50%"><textarea name="linkStart" rows="4" style="width:85%">${acquisition.linkStart}</textarea></td><td align="center" width="50%"><textarea name="linkEnd" rows="4" style="width:85%">${acquisition.linkEnd}</textarea></td></tr></table></td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h">标题:</td><td colspan="3" width="88%" class="pn-fcontent"><table border="0" width="100%"><tr><td align="center" width="50%"><textarea name="titleStart" rows="4" style="width:85%">${acquisition.titleStart}</textarea></td><td align="center" width="50%"><textarea name="titleEnd" rows="4" style="width:85%">${acquisition.titleEnd}</textarea></td></tr></table></td></tr><tr><td width="12%" class="pn-flabel pn-flabel-h">内容:</td><td colspan="3" width="88%" class="pn-fcontent"><table border="0" width="100%"><tr><td align="center" width="50%"><textarea name="contentStart" rows="4" style="width:85%">${acquisition.contentStart}</textarea></td><td align="center" width="50%"><textarea name="contentEnd" rows="4" style="width:85%">${acquisition.contentEnd}</textarea></td></tr></table></td></tr><tr><td colspan="4" class="pn-fbutton"><input type="submit" value="提交"/> &nbsp; <input type="reset" value="重置"/></td></tr></table></form></div></body></html>